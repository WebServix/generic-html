import{s as z,_ as I,a as B,b as F,c as A,d as H,e as N}from"./sendRequest.cdc39bce.js";import{r as _,a as K,b as T,f as m,l as e,u as s,Q as $,R as y,S as h,U as G,k as c,s as b,j as Q,F as C,i as W,o as l,m as J,c as f}from"./entry.81ce3418.js";import{u as O}from"./composables.94ded798.js";const X=e("div",{class:"name"},"Welcome Arnaud",-1),Y={class:"create"},Z=["onSubmit"],P=e("label",{for:"name"},"Name Website",-1),ee=e("label",{for:"url"},"URL",-1),te=e("label",{for:"template"},"Template",-1),ne=e("option",{value:"pizzeria"},"Pizzeria",-1),se=e("option",{value:"psy"},"Psy",-1),ae=e("option",{value:"research"},"Research",-1),oe=[ne,se,ae],le=e("button",{type:"submit"},"Create Website",-1),ie=["onSubmit"],re=e("label",{for:"name"},"Name Website",-1),ue=e("label",{for:"name"},"URL",-1),de=e("button",{type:"submit"},"Create Website",-1),ce={class:"f"},pe=e("br",null,null,-1),me=e("br",null,null,-1),_e=e("br",null,null,-1),be=e("br",null,null,-1),fe=e("br",null,null,-1),ve=e("br",null,null,-1),ye=e("br",null,null,-1),he=e("br",null,null,-1),ge={style:{display:"flex",width:"80%",margin:"auto"}},xe={style:{flex:"1","margin-right":"20px"}},Ce={style:{"box-shadow":"1px 1px 15px","margin-top":"10px"}},Le={__name:"generate",setup(ke){_({});const v=_({}),i=_({}),k=_({}),g=_([]);K(),T();let x=null;const o=_({name:"",url:"",template:""});O({script:[{src:"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js",integrity:"sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4",crossorigin:"anonymous"}],link:[{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css",rel:"stylesheet",type:"text/css",integrity:"sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65",crossorigin:"anonymous"},{href:"https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css",rel:"stylesheet",type:"text/css"},{href:"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css",rel:"stylesheet",type:"text/css"},{href:"https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css",rel:"stylesheet",type:"text/css"}]});async function w(){var n=await $fetch("/api/createWebsite",{method:"post",body:{name:o.value.name,url:o.value.url,template:o.value.template}});console.log(n.data),x=n.data,i.value=n.data.attributes,i.value.id=i.value.id,n.data&&n.data.attributes&&(v.value=n.data.attributes.pages.data)}async function L(){await $fetch("/api/deploy",{method:"post",body:{website_id:i.id}})}async function U(){var n=document.querySelectorAll("*[id]");for(const t of n)t.id.search("content_")==0&&(t.contentEditable=!0)}async function j(){var n=document.querySelectorAll("*[id]");for(const p of n)if(p.id.search("content_")==0){var t=p.id.split("_"),u=parseInt(t[1]),d=t[2];v.value[0].attributes.content[u][d]=p.innerHTML}await $fetch("/api/updateContentWebsite",{method:"post",body:v.value[0]})}async function S(n){await $fetch("/api/updateCSS",{method:"post",body:{CSS:n,id:x.id}}),i.value.css=n}async function R(){console.log("RETRIEVE");var n=await $fetch("/api/getWebsite",{method:"post",body:{id:30}});i.value=n.data.attributes;const t=await z("navigation/render/"+i.value.navigationId,null,!1);g.value=V(t.value),x=n.data,v.value=n.data.attributes.pages.data}function V(n){var t=[];for(const d of n)if(d.parent==null)t.push(d);else{var u=t.findIndex(p=>p.id==d.parent.id);console.log(u),t[u].child=t[u].child==null?[]:t[u].child,t[u].child.push(d)}return t}return(n,t)=>{const u=I,d=A,p=H,E=B,M=F,q=N;return l(),m(C,null,[X,e("div",Y,[s(k).step2!=!0?(l(),m("form",{key:0,onSubmit:$(w,["prevent"])},[e("fieldset",null,[e("ul",null,[e("li",null,[P,y(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=a=>s(o).name=a),required:""},null,512),[[h,s(o).name]])]),e("li",null,[ee,y(e("input",{type:"text",id:"url","onUpdate:modelValue":t[1]||(t[1]=a=>s(o).url=a),required:""},null,512),[[h,s(o).url]])]),e("li",null,[te,y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>s(o).template=a)},oe,512),[[G,s(o).template]])])])]),le],40,Z)):c("",!0),s(k).step2==!0?(l(),m("form",{key:1,onSubmit:$(w,["prevent"])},[e("fieldset",null,[e("ul",null,[e("li",null,[re,y(e("input",{type:"text",id:"name","onUpdate:modelValue":t[3]||(t[3]=a=>s(o).name=a),required:""},null,512),[[h,s(o).name]])]),e("li",null,[ue,y(e("input",{type:"text",id:"name","onUpdate:modelValue":t[4]||(t[4]=a=>s(o).url=a),required:""},null,512),[[h,s(o).url]])])])]),de],40,ie)):c("",!0)]),e("div",ce,[e("button",{onClick:t[5]||(t[5]=a=>S("brutalist"))},"Use Brutalist"),pe,e("button",{onClick:t[6]||(t[6]=a=>S("default"))},"Use Default"),me,b(),_e,e("button",{onClick:t[7]||(t[7]=a=>R())},"Retrieve Website"),b(),be,b(),fe,e("button",{onClick:t[8]||(t[8]=a=>U())},"Edit Mode"),b(),ve,e("button",{onClick:t[9]||(t[9]=a=>j())},"Save Edit"),b(),ye,b(),he,e("button",{onClick:t[10]||(t[10]=a=>L())},"Deploy"),e("div",{class:Q(["",s(i).css])},[e("div",ge,[(l(!0),m(C,null,W(s(v),(a,we)=>(l(),m("div",xe,[e("div",null,"Page: "+J(a.attributes.url),1),e("div",Ce,[(l(!0),m(C,null,W(a.attributes.content,(r,D)=>(l(),m("div",null,[r.__component=="page-structure.header"?(l(),f(u,{key:0,index:D,data:r,navList:s(g),generalConfig:s(i)},null,8,["index","data","navList","generalConfig"])):c("",!0),r.__component=="page-structure.cards"?(l(),f(d,{key:1,data:r},null,8,["data"])):c("",!0),r.__component=="page-structure.section"?(l(),f(p,{key:2,data:r},null,8,["data"])):c("",!0),r.__component=="page-structure.divider"?(l(),f(E,{key:3,generalConfig:s(i)},null,8,["generalConfig"])):c("",!0),r.__component=="page-structure.footer"?(l(),f(M,{key:4,navList:s(g),generalConfig:s(i)},null,8,["navList","generalConfig"])):c("",!0),r.__component=="page-structure.newsletter"?(l(),f(q,{key:5,data:r},null,8,["data"])):c("",!0)]))),256))])]))),256))])],2)])],64)}}};export{Le as default};
