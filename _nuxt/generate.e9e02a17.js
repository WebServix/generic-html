import{s as A,_ as H,a as T,b as N,c as K,d as Q,e as G,f as O,g as J}from"./sendRequest.9bca6fa7.js";import{j as b,k as P,l as X,a as c,b as t,u as n,O as W,P as h,Q as g,R as Y,e as u,i as f,f as L,s as Z,F as x,r as j,o as l,c as _}from"./entry.e91c7ec0.js";import{u as tt}from"./composables.b7d218e0.js";const et=t("div",{class:"name"},"Welcome Arnaud",-1),nt={class:"create"},st=["onSubmit"],at=t("label",{for:"name"},"Name Website",-1),ot=t("label",{for:"url"},"URL",-1),lt=t("label",{for:"template"},"Template",-1),it=t("option",{value:"pizzeria"},"Pizzeria",-1),rt=t("option",{value:"psychology"},"Psy",-1),ut=t("option",{value:"research"},"Research",-1),dt=[it,rt,ut],ct=t("button",{type:"submit"},"Create Website",-1),pt=["onSubmit"],_t=t("label",{for:"name"},"Name Website",-1),mt=t("label",{for:"name"},"URL",-1),ft=t("button",{type:"submit"},"Create Website",-1),bt={class:"f"},vt=t("br",null,null,-1),ht=t("br",null,null,-1),gt=t("br",null,null,-1),yt=t("br",null,null,-1),kt=t("br",null,null,-1),xt=t("br",null,null,-1),Ct=t("br",null,null,-1),wt=t("br",null,null,-1),$t=["href"],St=t("br",null,null,-1),Wt=t("div",{id:"status"},null,-1),Lt=["href"],jt={style:{display:"flex",width:"80%",margin:"auto"}},Et={style:{flex:"1","margin-right":"20px"}},Mt={style:{"box-shadow":"1px 1px 15px","margin-top":"10px"}},Dt={__name:"generate",setup(Rt){b({});const v=b({}),a=b({}),C=b({}),y=b([]);P(),X();let k=null;const r=b({name:"",url:"",template:""});tt({script:[{src:"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js",integrity:"sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4",crossorigin:"anonymous"}],link:[{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css",rel:"stylesheet",type:"text/css",integrity:"sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65",crossorigin:"anonymous"},{href:"https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css",rel:"stylesheet",type:"text/css"},{href:"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css",rel:"stylesheet",type:"text/css"},{href:"https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css",rel:"stylesheet",type:"text/css"}]});async function w(){var s=await $fetch("/api/createWebsite",{method:"post",body:{name:r.value.name,url:r.value.url,template:r.value.template}});console.log(s.data),k=s.data,a.value=s.data.attributes,a.value.hosting_info=s.data.hosting_info,a.value.id=s.data.id,s.data&&s.data.attributes&&(v.value=s.data.attributes.pages.data)}function $(){var s='<img src="https://api.netlify.com/api/v1/badges/'+a.value.hosting_info.site_id+'/deploy-status">';document.getElementById("status").innerHTML=s}async function E(){console.log("website_id"+a.value.id),await $fetch("/api/deploy",{method:"post",body:{website_id:a.value.id}}),$(),setInterval($,5e3)}async function M(){var s=document.querySelectorAll("*[id]");for(const e of s)e.id.search("content_")==0&&(e.contentEditable=!0)}async function R(){var s=document.querySelectorAll("*[id]");for(const m of s)if(m.id.search("content_")==0){var e=m.id.split("_"),d=parseInt(e[1]),p=e[2];v.value[0].attributes.content[d][p]=m.innerHTML}await $fetch("/api/updateContentWebsite",{method:"post",body:v.value[0]})}async function S(s){await $fetch("/api/updateCSS",{method:"post",body:{CSS:s,id:k.id}}),a.value.css=s}async function U(){console.log("RETRIEVE");var s=await $fetch("/api/getWebsite",{method:"post",body:{id:27}});a.value=s.data.attributes;const e=await A("navigation/render/"+a.value.navigationId,null,!1);y.value=V(e.value),k=s.data,v.value=s.data.attributes.pages.data}function V(s){var e=[];for(const p of s)if(p.parent==null)e.push(p);else{var d=e.findIndex(m=>m.id==p.parent.id);console.log(d),e[d].child=e[d].child==null?[]:e[d].child,e[d].child.push(p)}return e}return(s,e)=>{const d=H,p=K,m=Q,q=G,I=O,D=T,z=N,B=J;return l(),c(x,null,[et,t("div",nt,[n(C).step2!=!0?(l(),c("form",{key:0,onSubmit:W(w,["prevent"])},[t("fieldset",null,[t("ul",null,[t("li",null,[at,h(t("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>n(r).name=o),required:""},null,512),[[g,n(r).name]])]),t("li",null,[ot,h(t("input",{type:"text",id:"url","onUpdate:modelValue":e[1]||(e[1]=o=>n(r).url=o),required:""},null,512),[[g,n(r).url]])]),t("li",null,[lt,h(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>n(r).template=o)},dt,512),[[Y,n(r).template]])])])]),ct],40,st)):u("",!0),n(C).step2==!0?(l(),c("form",{key:1,onSubmit:W(w,["prevent"])},[t("fieldset",null,[t("ul",null,[t("li",null,[_t,h(t("input",{type:"text",id:"name","onUpdate:modelValue":e[3]||(e[3]=o=>n(r).name=o),required:""},null,512),[[g,n(r).name]])]),t("li",null,[mt,h(t("input",{type:"text",id:"name","onUpdate:modelValue":e[4]||(e[4]=o=>n(r).url=o),required:""},null,512),[[g,n(r).url]])])])]),ft],40,pt)):u("",!0)]),t("div",bt,[t("button",{onClick:e[5]||(e[5]=o=>S("brutalist"))},"Use Brutalist"),vt,t("button",{onClick:e[6]||(e[6]=o=>S("default"))},"Use Default"),ht,f(),gt,t("button",{onClick:e[7]||(e[7]=o=>U())},"Retrieve Website"),f(),yt,f(),kt,t("button",{onClick:e[8]||(e[8]=o=>M())},"Edit Mode"),f(),xt,t("button",{onClick:e[9]||(e[9]=o=>R())},"Save Edit"),f(),Ct,f(),wt,n(a)&&n(a).hosting_info?(l(),c("a",{key:0,href:"https://localhost:3000//en/"+n(a).id+"/index",target:"_blank"},"Preview",8,$t)):u("",!0),f(),St,t("button",{onClick:e[10]||(e[10]=o=>E())},"Deploy"),Wt,n(a)&&n(a).hosting_info?(l(),c("a",{key:1,href:n(a).hosting_info.url+"/en/"+n(a).id+"/index",target:"_blank"},L(n(a).hosting_info.url+"/en/"+n(a).id+"/index"),9,Lt)):u("",!0),t("div",{class:Z(["",n(a).css])},[t("div",jt,[(l(!0),c(x,null,j(n(v),(o,Ut)=>(l(),c("div",Et,[t("div",null,"Page: "+L(o.attributes.url),1),t("div",Mt,[(l(!0),c(x,null,j(o.attributes.content,(i,F)=>(l(),c("div",null,[i.__component=="page-structure.header"?(l(),_(d,{key:0,index:F,data:i,navList:n(y),generalConfig:n(a)},null,8,["index","data","navList","generalConfig"])):u("",!0),i.__component=="page-structure.cards"?(l(),_(p,{key:1,data:i},null,8,["data"])):u("",!0),i.__component=="page-structure.top-banner"?(l(),_(m,{key:2,data:i},null,8,["data"])):u("",!0),i.__component=="page-structure.fa-qs"?(l(),_(q,{key:3,data:i},null,8,["data"])):u("",!0),i.__component=="page-structure.section"?(l(),_(I,{key:4,data:i},null,8,["data"])):u("",!0),i.__component=="page-structure.divider"?(l(),_(D,{key:5,generalConfig:n(a)},null,8,["generalConfig"])):u("",!0),i.__component=="page-structure.footer"?(l(),_(z,{key:6,navList:n(y),generalConfig:n(a)},null,8,["navList","generalConfig"])):u("",!0),i.__component=="page-structure.newsletter"?(l(),_(B,{key:7,data:i},null,8,["data"])):u("",!0)]))),256))])]))),256))])],2)])],64)}}};export{Dt as default};
