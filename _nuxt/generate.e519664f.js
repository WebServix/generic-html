import{s as B,_ as F,a as H,b as A,c as N,d as T,e as K}from"./sendRequest.e94ad588.js";import{j as f,k as G,l as O,a as c,b as t,u as n,O as W,P as h,Q as g,R as Q,e as u,i as m,f as L,s as J,F as k,r as j,o as i,c as b}from"./entry.39dc2033.js";import{u as P}from"./composables.4c797c52.js";const X=t("div",{class:"name"},"Welcome Arnaud",-1),Y={class:"create"},Z=["onSubmit"],tt=t("label",{for:"name"},"Name Website",-1),et=t("label",{for:"url"},"URL",-1),nt=t("label",{for:"template"},"Template",-1),st=t("option",{value:"pizzeria"},"Pizzeria",-1),ot=t("option",{value:"psy"},"Psy",-1),at=t("option",{value:"research"},"Research",-1),it=[st,ot,at],lt=t("button",{type:"submit"},"Create Website",-1),rt=["onSubmit"],ut=t("label",{for:"name"},"Name Website",-1),dt=t("label",{for:"name"},"URL",-1),ct=t("button",{type:"submit"},"Create Website",-1),pt={class:"f"},_t=t("br",null,null,-1),mt=t("br",null,null,-1),ft=t("br",null,null,-1),bt=t("br",null,null,-1),vt=t("br",null,null,-1),ht=t("br",null,null,-1),gt=t("br",null,null,-1),yt=t("br",null,null,-1),xt=["href"],kt=t("br",null,null,-1),Ct=t("div",{id:"status"},null,-1),wt=["href"],St={style:{display:"flex",width:"80%",margin:"auto"}},$t={style:{flex:"1","margin-right":"20px"}},Wt={style:{"box-shadow":"1px 1px 15px","margin-top":"10px"}},Ut={__name:"generate",setup(Lt){f({});const v=f({}),o=f({}),C=f({}),y=f([]);G(),O();let x=null;const l=f({name:"",url:"",template:""});P({script:[{src:"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js",integrity:"sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4",crossorigin:"anonymous"}],link:[{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css",rel:"stylesheet",type:"text/css",integrity:"sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65",crossorigin:"anonymous"},{href:"https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css",rel:"stylesheet",type:"text/css"},{href:"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css",rel:"stylesheet",type:"text/css"},{href:"https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css",rel:"stylesheet",type:"text/css"}]});async function w(){var s=await $fetch("/api/createWebsite",{method:"post",body:{name:l.value.name,url:l.value.url,template:l.value.template}});console.log(s.data),x=s.data,o.value=s.data.attributes,o.value.hosting_info=s.data.hosting_info,o.value.id=s.data.id,s.data&&s.data.attributes&&(v.value=s.data.attributes.pages.data)}function S(){var s='<img src="https://api.netlify.com/api/v1/badges/'+o.value.hosting_info.site_id+'/deploy-status">';document.getElementById("status").innerHTML=s}async function E(){console.log("website_id"+o.value.id),await $fetch("/api/deploy",{method:"post",body:{website_id:o.value.id}}),S(),setInterval(S,5e3)}async function M(){var s=document.querySelectorAll("*[id]");for(const e of s)e.id.search("content_")==0&&(e.contentEditable=!0)}async function R(){var s=document.querySelectorAll("*[id]");for(const _ of s)if(_.id.search("content_")==0){var e=_.id.split("_"),d=parseInt(e[1]),p=e[2];v.value[0].attributes.content[d][p]=_.innerHTML}await $fetch("/api/updateContentWebsite",{method:"post",body:v.value[0]})}async function $(s){await $fetch("/api/updateCSS",{method:"post",body:{CSS:s,id:x.id}}),o.value.css=s}async function U(){console.log("RETRIEVE");var s=await $fetch("/api/getWebsite",{method:"post",body:{id:1}});o.value=s.data.attributes;const e=await B("navigation/render/"+o.value.navigationId,null,!1);y.value=V(e.value),x=s.data,v.value=s.data.attributes.pages.data}function V(s){var e=[];for(const p of s)if(p.parent==null)e.push(p);else{var d=e.findIndex(_=>_.id==p.parent.id);console.log(d),e[d].child=e[d].child==null?[]:e[d].child,e[d].child.push(p)}return e}return(s,e)=>{const d=F,p=N,_=T,I=H,q=A,D=K;return i(),c(k,null,[X,t("div",Y,[n(C).step2!=!0?(i(),c("form",{key:0,onSubmit:W(w,["prevent"])},[t("fieldset",null,[t("ul",null,[t("li",null,[tt,h(t("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>n(l).name=a),required:""},null,512),[[g,n(l).name]])]),t("li",null,[et,h(t("input",{type:"text",id:"url","onUpdate:modelValue":e[1]||(e[1]=a=>n(l).url=a),required:""},null,512),[[g,n(l).url]])]),t("li",null,[nt,h(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n(l).template=a)},it,512),[[Q,n(l).template]])])])]),lt],40,Z)):u("",!0),n(C).step2==!0?(i(),c("form",{key:1,onSubmit:W(w,["prevent"])},[t("fieldset",null,[t("ul",null,[t("li",null,[ut,h(t("input",{type:"text",id:"name","onUpdate:modelValue":e[3]||(e[3]=a=>n(l).name=a),required:""},null,512),[[g,n(l).name]])]),t("li",null,[dt,h(t("input",{type:"text",id:"name","onUpdate:modelValue":e[4]||(e[4]=a=>n(l).url=a),required:""},null,512),[[g,n(l).url]])])])]),ct],40,rt)):u("",!0)]),t("div",pt,[t("button",{onClick:e[5]||(e[5]=a=>$("brutalist"))},"Use Brutalist"),_t,t("button",{onClick:e[6]||(e[6]=a=>$("default"))},"Use Default"),mt,m(),ft,t("button",{onClick:e[7]||(e[7]=a=>U())},"Retrieve Website"),m(),bt,m(),vt,t("button",{onClick:e[8]||(e[8]=a=>M())},"Edit Mode"),m(),ht,t("button",{onClick:e[9]||(e[9]=a=>R())},"Save Edit"),m(),gt,m(),yt,n(o)&&n(o).hosting_info?(i(),c("a",{key:0,href:"https://localhost:3000//en/"+n(o).id+"/index",target:"_blank"},"Preview",8,xt)):u("",!0),m(),kt,t("button",{onClick:e[10]||(e[10]=a=>E())},"Deploy"),Ct,n(o)&&n(o).hosting_info?(i(),c("a",{key:1,href:n(o).hosting_info.url+"/en/"+n(o).id+"/index",target:"_blank"},L(n(o).hosting_info.url+"/en/"+n(o).id+"/index"),9,wt)):u("",!0),t("div",{class:J(["",n(o).css])},[t("div",St,[(i(!0),c(k,null,j(n(v),(a,jt)=>(i(),c("div",$t,[t("div",null,"Page: "+L(a.attributes.url),1),t("div",Wt,[(i(!0),c(k,null,j(a.attributes.content,(r,z)=>(i(),c("div",null,[r.__component=="page-structure.header"?(i(),b(d,{key:0,index:z,data:r,navList:n(y),generalConfig:n(o)},null,8,["index","data","navList","generalConfig"])):u("",!0),r.__component=="page-structure.cards"?(i(),b(p,{key:1,data:r},null,8,["data"])):u("",!0),r.__component=="page-structure.section"?(i(),b(_,{key:2,data:r},null,8,["data"])):u("",!0),r.__component=="page-structure.divider"?(i(),b(I,{key:3,generalConfig:n(o)},null,8,["generalConfig"])):u("",!0),r.__component=="page-structure.footer"?(i(),b(q,{key:4,navList:n(y),generalConfig:n(o)},null,8,["navList","generalConfig"])):u("",!0),r.__component=="page-structure.newsletter"?(i(),b(D,{key:5,data:r},null,8,["data"])):u("",!0)]))),256))])]))),256))])],2)])],64)}}};export{Ut as default};
